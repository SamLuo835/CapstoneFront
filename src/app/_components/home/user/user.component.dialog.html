<h1 mat-dialog-title >Sheridan ID: {{user.sheridanId}} 
    <span *ngIf="user.blackListed">(Banned)</span>
    <span *ngIf="!user.blackListed">(Active)</span>
        <button float="right" type="button" (click)="onClick()" class="close" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
</h1>
<span><mat-slide-toggle color='primary' style="color: #073063;" [(ngModel)]="user.blackListed" (change)="toggleBanSwitch()">{{toggleText}}</mat-slide-toggle></span>

   
    <div class="dialog-content" id="custDialog" mat-dialog-content>
        <mat-tab-group>
        <mat-tab label="Basic Information">
        <br>
        <table class="full-width" cellspacing="0">
            <tr>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="First Name" [(ngModel)]="user.firstName">
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Last Name" [(ngModel)]="user.lastName">
                    </mat-form-field>
                </td>
            </tr>
        </table>
        <br>
        <table class="full-width" cellspacing="0">
            <tr>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Phone" [(ngModel)]="user.phone">
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Address" [(ngModel)]="user.address">
                    </mat-form-field>
                </td>
            </tr>
            <br>
            <tr> 
                <td>
                    <mat-form-field class="full-width">
                            <input matInput placeholder="Personal Email"  [(ngModel)]="user.personalEmail">
                    </mat-form-field>
                </td>
                    <td>
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Sheridan Email"  [(ngModel)]="user.sheridanEmail">
                        </mat-form-field>
                    </td>
                <br>
            </tr>
           
        </table>
        <br>
        <table class="full-width">
            <tr>
                <td>
                    <mat-form-field class="full-width">
                        <mat-label>Customer Type</mat-label>
                        <mat-select [(value)]="user.type">
                            <mat-option value="STUDENT">Student</mat-option>
                            <mat-option value="STAFF">Staff</mat-option>
                            <mat-option value="FACULTY">Faculty</mat-option>
                        </mat-select>
                    </mat-form-field>
                </td>
                <td>
                    <mat-checkbox class="full-width" color='primary' [(ngModel)]="user.willRecvEmail">Receive Email Notification</mat-checkbox>

                </td>
            </tr>
        </table>
        <br>
        <table class="full-width">
                <tr>
                        <td>
                            <mat-form-field class="full-width">
                                <input matInput disabled [matDatepicker]="signedpicker" placeholder="Waiver Signed Date" [value]="signedDate">
                                <mat-datepicker-toggle matSuffix [for]="signedpicker"></mat-datepicker-toggle>
                                <mat-datepicker #signedpicker></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                                <mat-form-field class="full-width">
                                    <input matInput disabled [matDatepicker]="expirepicker" placeholder="Waiver Expire Date" [value]="expireDate">
                                    <mat-datepicker-toggle matSuffix [for]="expirepicker"></mat-datepicker-toggle>
                                    <mat-datepicker #expirepicker></mat-datepicker>
                                </mat-form-field>
                            </td>
                    </tr>
        </table>
        <table class="full-width">
            <tr>
                    <td>
                            <mat-form-field class="full-width">
                                <input matInput readonly [matDatepicker]="programEndPicker" placeholder="Program End Date"  [(ngModel)]="programEndDate">
                                <mat-datepicker-toggle matSuffix [for]="programEndPicker"></mat-datepicker-toggle>
                                <mat-datepicker #programEndPicker></mat-datepicker>
                            </mat-form-field>
                    </td>
                    <td>
                            <mat-form-field class="full-width">
                                <input matInput disabled  [matDatepicker]="createdDatePicker" placeholder="Customer Created Date"  [(ngModel)]="createdOn">
                                <mat-datepicker-toggle matSuffix [for]="createdDatePicker"></mat-datepicker-toggle>
                                <mat-datepicker #createdDatePicker></mat-datepicker>
                            </mat-form-field>
                    </td>
            </tr>
        </table>

       <!-- <table class="full-width">
                <tr>
                    <td>
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Emergency Contact First Name" [(ngModel)]="user.emergencyContactFirstName">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field class="full-width">
                                <input matInput placeholder="Emergency Contact Last Name"  [(ngModel)]="user.emergencyContactLastName">
                        </mat-form-field>
                    </td>
                   
                </tr>
                <tr>
                    <td >
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Emergency Contact Phone"  [(ngModel)]="user.emergencyContactPhone">
                        </mat-form-field>
                    </td>
                </tr>
            </table>
        -->
       
    </mat-tab>
    <mat-tab label="Active Rental/ Owing Amount">
      <table  class="full-width" style="color:#5f6368;margin:auto;table-layout: fixed">
        <tr class="tableHeader" style="border-bottom:solid 1px black" ><td class="alignleft">Category</td><td>Amount</td><td>Paid</td><td>Edit/Remove</td></tr>
        <tbody cdkDropList #example = "cdkDropList" [cdkDropListData] = "categoryList" [cdkDropListConnectedTo]="[predefine]" (cdkDropListDropped)="drop($event)">  
        <tr style="height:20px;" *ngIf="categoryList.length==0"><td></td><td></td><td></td><td></td><tr>
        <tr  *ngFor="let item of categoryList; let i = index">
              <td *ngIf="!isEditMode(i)" class="alignleft" style="height: 60px">
                {{item.category}}
              </td>
              <td *ngIf="isEditMode(i)" class="alignleft" style="height: 60px">
                  <mat-form-field style="width:80%">
                    <input matInput [(ngModel)]="item.category">
                  </mat-form-field> 
              </td>
              <td *ngIf="!isEditMode(i)">
                ${{item.value}}
              </td>
              <td *ngIf="isEditMode(i)">
                  <mat-form-field  style="width:80%">
                    <input matInput style="text-align: center"  type="number" [(ngModel)]="item.value">
                  </mat-form-field> 
              </td>
              <td>
                <mat-checkbox  style="margin:0 10px;" color='primary' [disabled]="!isEditMode(i)"  [(ngModel)]="item.paid"  ></mat-checkbox>
              </td>
              <td *ngIf="!isEditMode(i)">
                <a class="penIcon"  matTooltipPosition="right"  [matTooltipDisabled]="!checkEditModeOn()" matTooltip="Confirm unsave category first" (click)="enterEditMode(i)">
                  <mat-icon>create</mat-icon>
                </a>
              </td>
              <td *ngIf="isEditMode(i)">
                  <a class="editRentalIcon"  style="margin-right: 15px;color:#28a745" matTooltip="Confirm" matTooltipPosition="right" (click)="confirmEdit(i)">
                    <mat-icon>check</mat-icon>
                  </a>
                  <a  class="editRentalIcon" style="color:#dc3545" matTooltip="Remove Category"  matTooltipPosition="right"   (click)="deleteRow(i)">
                      <mat-icon>delete_outline</mat-icon>
                    </a>
                </td>
            </tr>
          </tbody>
  
        </table>
        
        <h6  *ngIf="categoryList.length==0" style="color:#073063;margin:20px;text-align: center">No receivables found for this rental.</h6>
        <div style="display: flex;justify-content: flex-end">
        <mat-checkbox  style="margin:0 10px;color:#073063;font-size: 0.7em" color='primary' [(ngModel)]="checkBoxState" >The rental is ready to be closed</mat-checkbox>
        </div>
        <hr style="margin-top: 0">
        <h6 style="color:#073063;font-weight: 600;">Drag The Following Pre-defined Category To The Table</h6>
          <div style="display: flex;flex-wrap: wrap;align-content: center" cdkDropList #predefine="cdkDropList" [cdkDropListData]="predefinedCat" [cdkDropListConnectedTo]="[example]">
            <span (mouseover)="hoverIn(i)" (mouseout)="hoverOut()" cdkDrag class="dragCategory" *ngFor="let category of predefinedCat; let i = index"  >{{hoverText && (i == currentIndex)?'$'+category['value']:category['category']}}</span>
          </div>
  
        <span  style="font-size: 0.8em;color:#5f6368;margin-left: 15px;">* You can add predifined categories in Settings</span>  
    </mat-tab>
</mat-tab-group>
</div>
       <hr>
    <div style="display: flex;justify-content: space-between">
    <mat-dialog-actions class="close-dialog">
            <button class="btn btn-warning" (click)="saveChanges()" style="font-weight: 500;font-size: 0.9rem">SAVE CHANGES</button>
    </mat-dialog-actions>
    <mat-dialog-actions *ngIf="expireAlert" class="close-dialog">
            <a class="redirectLink"  (click)="openWaiverPage()">Sign Waiver</a>
    </mat-dialog-actions>
    <mat-dialog-actions class="close-dialog">
            <a class="redirectLink" mat-dialog-close  (click)="showArchivedRecord()">Show Associated Past Rentals</a>
    </mat-dialog-actions>
</div>